<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Website - Comment System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- First Article -->
    <article class="news-article">
        <h1>Call of Duty is back, and it's got a battle on its hands</h1>
        <p>
            There are some things you can always rely on, and a new Call of Duty game coming out each year is one of them.
            As one of the best-known names in video games, it's a series that needs little introduction.
            According to publisher Activision, it's sold an estimated 500 million copies, a movie adaptation is on the way, and despite having launched in 2003 it still reliably appears at - or near - the top of the annual bestseller charts.
            But this year the world's top military shooter might have a fight on its hands.         Battlefield 6, which has been a huge hit for rival gaming giant Electronic Arts, has been drawing attention away from its veteran competitor.
            And long-time Call of Duty fans have been increasingly vocal over worries about the series losing touch with its roots.
            The clash of the multiplayer titans comes at an interesting time for the makers of Call of Duty, who've had to issue responses to fan concerns about the series losing its way.
            It has long offered players the chance to purchase "operator skins" that change their character's appearance.
            They're a frequent source of brand crossovers, and previous designs have been based on stars including footballer Neymar Jr, streamer NickMercs and rapper Nicki Minaj.
            But when Activision revealed skins based on 90s cartoon characters Beavis and Butthead earlier this year, there was a backlash.
            Fans accused the company of trying to mimic Fortnite, the ever-popular multiplayer game famous for its sometimes unlikely crossovers, which have included pop star Sabrina Carpenter and an AI-voiced Darth Vader in 2025.  
            Activision said the feedback from fans "hit home" and that it took the complaints about the series losing its identity seriously.
            It's also being released after parent company Microsoft increased prices of its Game Pass subscription service by 20%, angering many players.
        </p>
    </article>

    <!-- First Articles Comment -->
    <section class="comment-section">

        <div class="stats-container">
            <h3>Reader Engagement</h3>
            <p><strong>Total Comments:</strong> <span id="total1">0</span></p>
            <p><strong>Average Rating:</strong> <span id="avg1">0</span> ⭐</p>
        </div>

        <h2>Write a Comment</h2>

        <form id="form1">

            <label>Name *</label>
            <input type="text" id="name1">
            <small id="nameErr1" class="error"></small>

            <label>Email (Optional)</label>
            <input type="text" id="email1">
            <small id="emailErr1" class="error"></small>

            <label>Comment *</label>
            <textarea id="comment1"></textarea>
            <small id="commentErr1" class="error"></small>

            <label>Rate This Content (Optional)</label>
            <div class="star-rating" id="stars1">
                <span data-s="1">★</span>
                <span data-s="2">★</span>
                <span data-s="3">★</span>
                <span data-s="4">★</span>
                <span data-s="5">★</span>
            </div>
            <p>Selected Rating: <span id="rate1">0</span></p>

            <button type="submit">Submit Comment</button>
        </form>

        <h3>User Comments</h3>
        <div id="list1"></div>

    </section>


    <!-- Second Article -->
    <article class="news-article">
        <h1>PC gaming giant Valve unveils new console to rival Xbox and PlayStation</h1>
        <p>
            Valve, the company behind PC gaming platform Steam, has revealed a new console to rival Nintendo, Xbox and PlayStation.
            The Steam Machine is a home console designed to allow gamers to play PC games on their TV - though it can also be used as a computer.
            It is a spiritual sequel to the 2014 device of the same name, which failed to break into a market dominated by the three big gaming giants.
            Prices for those consoles, back then, started at $499 (£300) - but Valve's latest iteration is expected to cost a good deal more.
            The Steam Machine will go on sale in early 2026, the company said, with the pricing yet to be announced.
            The company says this and more details will be provided closer to the exact release date, which is also currently unknown.
            Since Valve launched Steam in 2003, it has grown to become the world's largest distribution platform for PC gaming.
            Around 25 million Steam players were online and six million were playing games at the time of writing, according to the platform's own metrics.
            But whether its new hardware can match Steam's success will remain to be seen when the devices launch next year.
            Analysts previously cast doubt on the Steam Machine's significance when it launched in its original, clunkier form a decade ago - saying its price-tag and potential might only really entice Steam "power users".
            In a video announcement, Valve described the new console as "a powerful gaming PC in a small but mighty package".
            The firm argues the device is "optimised for gaming" over other PCs because the firm is able to say which games on its massive digital storefront will work on it before you buy.
            Powered by its Linux-based SteamOS operating system and AMD graphics processors, Valve said the new Steam Machine can support 4k resolution and 60 frames per second.
        </p>
    </article>




    <!-- Second Articles COMMENT  -->
    <section class="comment-section">

        <div class="stats-container">
            <h3>Reader Engagement</h3>
            <p><strong>Total Comments:</strong> <span id="total2">0</span></p>
            <p><strong>Average Rating:</strong> <span id="avg2">0</span> ⭐</p>
        </div>

        <h2>Write a Comment</h2>

        <form id="form2">

            <label>Name *</label>
            <input type="text" id="name2">
            <small id="nameErr2" class="error"></small>

            <label>Email (Optional)</label>
            <input type="text" id="email2">
            <small id="emailErr2" class="error"></small>

            <label>Comment *</label>
            <textarea id="comment2"></textarea>
            <small id="commentErr2" class="error"></small>

            <label>Rate This Content (Optional)</label>
            <div class="star-rating" id="stars2">
                <span data-s="1">★</span>
                <span data-s="2">★</span>
                <span data-s="3">★</span>
                <span data-s="4">★</span>
                <span data-s="5">★</span>
            </div>
            <p>Selected Rating: <span id="rate2">0</span></p>

            <button type="submit">Submit Comment</button>
        </form>

        <h3>User Comments</h3>
        <div id="list2"></div>

    </section>


<script>

        let comments1 = [];
        let ratings1 = [];

        let comments2 = [];
        let ratings2 = [];

        function setupStars(sectionId, displayId, ratingArray) {

            document.querySelectorAll(`#${sectionId} span`).forEach(star => {

                star.onclick = function () {

                    let rating = parseInt(this.dataset.s);

                    ratingArray[0] = rating; // store rating in ARRAY (single slot)

                    document.getElementById(displayId).textContent = rating;

                    document.querySelectorAll(`#${sectionId} span`)
                        .forEach(s => s.classList.remove("selected"));

                    for (let i = 0; i < rating; i++) {
                        document.querySelectorAll(`#${sectionId} span`)[i]
                            .classList.add("selected");
                    }
                };
            });
        }


        setupStars("stars1", "rate1", ratings1);
        setupStars("stars2", "rate2", ratings2);

        function setupForm(formId, nameId, emailId, commentId,
                           errN, errE, errC,
                           listId, totalId, avgId,
                           commentArray, ratingArray) {

            document.getElementById(formId).onsubmit = function (e) {
                e.preventDefault();

                let name = document.getElementById(nameId).value.trim();
                let email = document.getElementById(emailId).value.trim();
                let comment = document.getElementById(commentId).value.trim();

                document.getElementById(errN).textContent = "";
                document.getElementById(errE).textContent = "";
                document.getElementById(errC).textContent = "";

                let valid = true;

                if (name.length < 2 || name.length > 50) {
                    document.getElementById(errN).textContent =
                        "Name should be between 2 and 50 characters";
                    valid = false;
                }

                if (email.length > 0 && !email.includes("@")) {
                    document.getElementById(errE).textContent =
                        "Please enter a valid email address";
                    valid = false;
                }

                if (comment.length < 10 || comment.length > 500) {
                    document.getElementById(errC).textContent =
                        "Comment should be between 10 and 500 characters";
                    valid = false;
                }

                if (!valid) return;

                commentArray.push([name, email, comment, ratingArray[0] || 0]);

                document.getElementById(totalId).textContent = commentArray.length;

                let validRatings = commentArray
                    .map(c => c[3])
                    .filter(r => r > 0);

                let avg = validRatings.length > 0
                    ? (validRatings.reduce((a, b) => a + b, 0) / validRatings.length).toFixed(1)
                    : 0;

                document.getElementById(avgId).textContent = avg;

                let div = document.createElement("div");
                div.className = "comment-box";
                div.innerHTML = `
                    <strong>${name}</strong> (${email || "No Email"})<br>
                    <p>${comment}</p>
                    <p>Rating: ${ratingArray[0] ? ratingArray[0] + " ⭐" : "No Rating"}</p>
                `;

                document.getElementById(listId).appendChild(div);

                ratingArray[0] = 0;
                this.reset();
                document.getElementById(avgId.replace("avg", "rate")).textContent = 0;
            };
        }


        setupForm("form1", "name1", "email1", "comment1",
                  "nameErr1", "emailErr1", "commentErr1",
                  "list1", "total1", "avg1",
                  comments1, ratings1);

        setupForm("form2", "name2", "email2", "comment2",
                  "nameErr2", "emailErr2", "commentErr2",
                  "list2", "total2", "avg2",
                  comments2, ratings2);

    </script>

</body>
</html>
